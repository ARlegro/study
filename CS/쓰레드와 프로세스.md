## 쓰레드 vs 프로세스

프로세스 : OS로부터 자원을 할당받은 작업의 단위

스레드 : 프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위

### **프로세스**

**✅개념**

- OS로부터 자원을 할당받아 실행중인 작업(프로그램)의 단위를 의미한다.

✅ 특징

- OS가 관리하는 실행 단위이다.
- 각각의 프로세스는 OS로부터 고립된 메모리 공간을 할당받는다
    - 이 떄, 이 메모리 공간을 VM = Virtual Memory 라고 한다.
    - 공간 분리 : 다른 프로세스의 VM에는 직접 접근할 수 없다.
- 프로세스는 1개 이상의 스레드를 갖고 있는다.

✅ 메모리 구조

대표적으로는 Heap과, Stack 영역으로 나뉜다.

1. Heap 영역 : 런타임 시 동적으로 할당되는 메모리
2. Stack 영역 : 함수 호출 시 생성되는 지역 변수, 매개변수, 주소 등을 저장

### 스레드

![image](https://github.com/user-attachments/assets/a319f970-4fad-47ec-8ef2-b1ace91c43f8)


**✅ 개념**

- 프로세스 내에서 코드 실행의 흐름을 담당하는 단위

**✅ 특징**

1개의 프로세스 내에 여러 스레드가 존재할 수 있다.

- 각 스레드는 독립적인 실행 흐름을 가짐
- 각 스레드는 프로세스가 할당받은 자원(VM)을 공유하며 사용한다.
- 각 스레드마다 고유의 TLS(Thread Local Storage)가 존재하여 스레드 전용 데이터를 관리할 수 있다.

**✅ 공유되는 자원 vs 독립적인 자원**

1개의 프로세스 내 모든 스레드들은 모든 자원을 공유하는 것이 아니다.

즉, 공유되는 영역과 독립적인 영역이 있다는 것이다.

1. **공유되는 영역 : Heap 영역** 등
2. **독립적인 영역 : Stack 영역**, TLS 등

## 하드웨어(H/W)와 메모리 관점

![image](https://github.com/user-attachments/assets/14f5135c-84d3-4a08-b46b-efe715c46209)


시스템을 구성하는 3개의 레이어

**✅ 3개의 레이어**

1. **User모드**
    - 일반 응용 프로그램이 실행되는 영역
    - 직접 하드웨어에 접근할 수 없는 영역

2. **커널 모드**
    - OS 커널이 동작하는 영역
    - 모든 H/W 자원에 직접 접근할 수 있따.

3. **하드웨어**
    - CPU, RAM, HDD 등 실제 물리적인 장치들이 존재하는 영역

✅ 연산의 흐름

프로세스는 실행 흐름 속 연산을 하기 위해 CPU와 메모리가 필요하다

하지만 USER영역인 프로세스는 하드웨어의 장치들을 직접적으로 사용할 수 없다.

❓그렇다면 어떻게 프로세스가 연산을 하지❓

- OS(커널 영역)가 프로세스에 필요한 자원을 가상 메모리(VM, Virtual Memory) 형태로 할당해준다.
- VM을 통해, 프로세스는 데이터를 처리할 수 있는 것이다.

**✅ Virtual Memory 심화**

- ‘RAM + HDD’를 잘 조합해서 하나의 통합된 메모리 공간으로 추상화한 것이다.
- 즉, VM 내부에서는 일부는 RAM을, 일부는 HDD를 갖는 것이다.
    - RAM 이 부족하면 조금은 느린 HDD 메모리를 임시로 사용한다.
    - 참고 : HDD는 2차 메모리라고도 불림
